<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>תפריט - המאפים של אמא</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>


  <!-- כפתור סל קניות קבוע -->
<button class="cart-toggle" onclick="toggleCart()">
  🛒
  <span id="cart-count-badge" class="cart-badge">0</span>
</button>

<!-- סל צדדי -->
<div class="side-cart" id="sideCart">
  <button class="close-btn" onclick="toggleCart()">×</button>
  <h3>🛒 הסל שלך</h3>
  <ul id="cart-items"></ul>
  <p><strong>סה"כ: <span id="total">0</span> ₪</strong></p>
  <a id="whatsappLink" href="#" target="_blank" class="whatsapp-send">📤 שלח בוואטסאפ</a>
</div>



<header class="site-header">
  <div class="header-content">
    <h1>תפריט להזמנה</h1>
    <nav class="main-nav">
      <a href="index.html">🏠 בית</a>
      <a href="menu.html">📋 תפריט</a>
      <a href="gallery.html">📷 גלריה</a>
    </nav>
  </div>
</header>

<main>

  <section class="menu-section" id="platters">
    <h2>🧁 מגשי האירוח של מרגלית</h2>
  
    <div class="menu-item">
      <img src="images/mash_events1.jpg" alt="מגש אירועים 1">
      <div>
        <strong>מגש אירועים 1</strong><br>
        <span class="price">250 ₪</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>
          <button onclick="updateCart('מגש אירועים 1', 250, -1, 'images/mash_events1.jpg')">➖</button>
          <span id="count-מגש אירועים 1">0</span>
          <button onclick="updateCart('מגש אירועים 1', 250, 1, 'images/mash_events1.jpg')">➕</button>
        </div>
      </div>
    </div>
  
    <div class="menu-item">
      <img src="images/mash_events2.jpg" alt="מגש אירועים 2">
      <div>
        <strong>מגש אירועים 2</strong><br>
        <span class="price">200 ₪</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>
          <button onclick="updateCart('מגש אירועים 2', 200, -1, 'images/mash_events2.jpg')">➖</button>
          <span id="count-מגש אירועים 2">0</span>
          <button onclick="updateCart('מגש אירועים 2', 200, 1, 'images/mash_events2.jpg')">➕</button>
        </div>
      </div>
    </div>
  
    <div class="menu-item">
      <img src="images/dates_peanuts.jpg" alt="עוגיות תמרים ובוטנים">
      <div>
        <strong>מגש עוגיות תמרים ובוטנים</strong><br>
        <span class="price">150 ₪</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>
          <button onclick="updateCart('מגש עוגיות תמרים ובוטנים', 150, -1, 'images/dates_peanuts.jpg')">➖</button>
          <span id="count-מגש עוגיות תמרים ובוטנים">0</span>
          <button onclick="updateCart('מגש עוגיות תמרים ובוטנים', 150, 1, 'images/dates_peanuts.jpg')">➕</button>
        </div>
      </div>
    </div>
  
    <div class="menu-item">
      <img src="images/walnut_cookies.jpg" alt="עוגיות אגוזי מלך">
      <div>
        <strong>מגש עוגיות אגוזי מלך</strong><br>
        <span class="price">150 ₪</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>
          <button onclick="updateCart('מגש עוגיות אגוזי מלך', 150, -1, 'images/walnut_cookies.jpg')">➖</button>
          <span id="count-מגש עוגיות אגוזי מלך">0</span>
          <button onclick="updateCart('מגש עוגיות אגוזי מלך', 150, 1, 'images/walnut_cookies.jpg')">➕</button>
        </div>
      </div>
    </div>
  
  </section>
  


  <!-- עוגיות -->
  <section class="menu-section" id="cookies">
    <h2>🍪העוגיות של מרגלית</h2>
    <div class="menu-item">
      <img src="images/cookies.jpg" alt="עוגיות">
      <div>
        <strong>עוגיות מרוקאיות</strong><br>
        <span class="price">25 ₪ לקופסה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>

          <button onclick="updateCart('עוגיות מרוקאיות', 25, -1, 'images/cookies.jpg')">➖</button>
          <span id="count-עוגיות מרוקאיות">0</span>
          <button onclick="updateCart('עוגיות מרוקאיות', 25, 1, 'images/cookies.jpg')">➕</button>
        </div>
      </div>
    </div>
  </section>

  <section class="menu-section" id="breads">
    <h2>🥪 המאפים האישיים של מרגלית</h2>
  
    <div class="menu-item">
      <img src="images/fricasse.jpg" alt="פריקסה">
      <div>
        <strong>פריקסה טוניסאי</strong><br>
        <span class="price">15 ₪ ליחידה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>
          <button onclick="updateCart('פריקסה טוניסאי', 15, -1, 'images/fricasse.jpg')">➖</button>
          <span id="count-פריקסה טוניסאי">0</span>
          <button onclick="updateCart('פריקסה טוניסאי', 15, 1, 'images/fricasse.jpg')">➕</button>
        </div>
      </div>
    </div>
  
    <div class="menu-item">
      <img src="images/sfinge.jpg" alt="ספינג'">
      <div>
        <strong>ספינג'</strong><br>
        <span class="price">5 ₪ ליחידה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>
          <button onclick="updateCart('ספינג', 5, -1, 'images/sfinge.jpg')">➖</button>
          <span id="count-ספינג">0</span>
          <button onclick="updateCart('ספינג', 5, 1, 'images/sfinge.jpg')">➕</button>
        </div>
      </div>
    </div>
    
  

  
  </section>

  <section class="menu-section" id="cookies-by-weight">
    <h2>🍪 עוגיות לפי ק"ג</h2>
  
    <div class="menu-item">
      <img src="images/machine_cookies.jpg" alt="עוגיות מכונה">
      <div>
        <strong>עוגיות מכונה</strong><br>
        <span class="price">100 ₪ לק"ג</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>
          <button onclick="updateCart('עוגיות מכונה', 100, -1, 'images/machine_cookies.jpg')">➖</button>
          <span id="count-עוגיות מכונה">0</span>
          <button onclick="updateCart('עוגיות מכונה', 100, 1, 'images/machine_cookies.jpg')">➕</button>
        </div>
      </div>
    </div>
  
  </section>
  
 
  




  <section class="contact-links">
    <p style="margin-bottom: 10px; font-size: 18px; font-weight: bold;">
      לא מצאתם את מה שחיפשתם או יש לכם שאלה?
    </p>
    <a href="https://wa.me/972505183940?text=שלום!%20רציתי%20לברר%20על%20מאפה%20או%20הזמנה%20שלא%20מופיעה%20בתפריט"
       target="_blank"
       class="main-button">
      📩 דברו איתנו בוואטסאפ
    </a>
  </section>

  <!-- רשתות חברתיות -->
  <section class="social-icons">
    <p>עקבו אחרינו גם ברשתות החברתיות:</p>
    <div class="icon-container">
      <a href="https://www.instagram.com/margalit222/" target="_blank" class="icon instagram" aria-label="Instagram"></a>
      <a href="https://www.facebook.com/margalit.saban/" target="_blank" class="icon facebook" aria-label="Facebook"></a>
    </div>
  </section>

</main>

<footer>
  <p>© 2025 כל הזכויות שמורות - המאפים של אמא</p>
</footer>

<script>
  const cart = JSON.parse(localStorage.getItem("cart") || "{}");

  function updateCart(item, price, delta, image = null) {
    if (!cart[item]) cart[item] = { count: 0, price, image };
    cart[item].count = Math.max(0, cart[item].count + delta);
    if (image) cart[item].image = image;
    localStorage.setItem("cart", JSON.stringify(cart));
    syncQuantitiesFromCart(); // עדכון הכמויות בתפריט
    renderCart();             // עדכון הסל
  }

  function renderCart() {
    const ul = document.getElementById("cart-items");
    const totalSpan = document.getElementById("total");
    const link = document.getElementById("whatsappLink");
    ul.innerHTML = "";
    let total = 0;
    let message = "שלום! אני מעוניין להזמין:\n";
    let totalItems = 0;

    for (let item in cart) {
      const product = cart[item];
      if (product.count > 0) {
        const li = document.createElement("li");
        li.innerHTML = `
          <div style="display: flex; align-items: center; gap: 10px;">
            <img src="${product.image}" alt="${item}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 6px;">
            <div style="flex-grow: 1;">
              <strong>${item}</strong><br>
              <span style="font-size: 14px; color: #777;">🧺 ${product.count} יחידות בסל</span>
              <div class="quantity-controls">
                <div style="margin-bottom: 5px; font-size: 14px; color: #666;">הוספה לסל:</div>
                <button onclick="updateCart('${item}', ${product.price}, -1, '${product.image}')">➖</button>
                <span>${product.count}</span>
                <button onclick="updateCart('${item}', ${product.price}, 1, '${product.image}')">➕</button>
              </div>
              <div style="margin-top: 5px; font-size: 14px; color: #555;">
                סה"כ: ${product.count * product.price} ₪
              </div>
            </div>
          </div>
        `;
        ul.appendChild(li);
        total += product.count * product.price;
        totalItems += product.count;
        message += `- ${item} x ${product.count}\n`;
      }
    }

    totalSpan.innerText = total;
    link.href = "https://wa.me/972505183940?text=" + encodeURIComponent(message + "\nסה\"כ לתשלום: " + total + " ₪");

    const badge = document.getElementById("cart-count-badge");
    if (totalItems > 0) {
      badge.innerText = totalItems;
      badge.style.display = "inline-block";
    } else {
      badge.style.display = "none";
    }
  }

  function syncQuantitiesFromCart() {
    for (let item in cart) {
      const span = document.getElementById("count-" + item);
      if (span) {
        span.innerText = cart[item].count;
      }
    }
  }

  function toggleCart() {
    document.getElementById("sideCart").classList.toggle("open");
  }

  document.addEventListener("DOMContentLoaded", () => {
    syncQuantitiesFromCart();
    renderCart();
  });
</script>


<script src="cart.js" defer></script>

</body>
</html>
