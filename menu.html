<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>תפריט - המאפים של אמא</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>


  <!-- כפתור סל קניות קבוע -->
<button class="cart-toggle" onclick="toggleCart()">
  🛒
  <span id="cart-count-badge" class="cart-badge">0</span>
</button>

<!-- סל צדדי -->
<div class="side-cart" id="sideCart">
  <button class="close-btn" onclick="toggleCart()">×</button>
  <h3>🛒 הסל שלך</h3>
  <ul id="cart-items"></ul>
  <p><strong>סה"כ: <span id="total">0</span> ₪</strong></p>
  <a id="whatsappLink" href="#" target="_blank" class="whatsapp-send">📤 שלח בוואטסאפ</a>
</div>



<header class="site-header">
  <div class="header-content">
    <h1>תפריט להזמנה</h1>
    <nav class="main-nav">
      <a href="index.html">🏠 בית</a>
      <a href="menu.html">📋 תפריט</a>
      <a href="gallery.html">📷 גלריה</a>
    </nav>
  </div>
</header>

<main>



  <!-- עוגיות -->
  <section class="menu-section" id="cookies">
    <h2>העוגיות של מרגלית🍪</h2>
    <div class="menu-item">
      <img src="images/cookies.jpg" alt="עוגיות">
      <div>
        <strong>עוגיות מרוקאיות</strong><br>
        <span class="price">25 ₪ לקופסה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>

          <button onclick="updateCart('עוגיות מרוקאיות', 25, -1, 'images/cookies.jpg')">➖</button>
          <span id="count-עוגיות מרוקאיות">0</span>
          <button onclick="updateCart('עוגיות מרוקאיות', 25, 1, 'images/cookies.jpg')">➕</button>
        </div>
      </div>
    </div>
  </section>

  <!-- מאפים -->
  <section class="menu-section" id="savory">
    <h2>המאפים של מרגלית🥐</h2>

    <div class="menu-item">
      <img src="images/fricasse.jpg" alt="פריקסה">
      <div>
        <strong>פריקסה</strong><br>
        <span class="price">15 ₪ ליחידה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>

          <button onclick="updateCart('פריקסה', 15, -1, 'images/fricasse.jpg')">➖</button>
          <span id="count-פריקסה">0</span>
          <button onclick="updateCart('פריקסה', 15, 1, 'images/fricasse.jpg')">➕</button>
        </div>
      </div>
    </div>

    <div class="menu-item">
      <img src="images/sfenj.jpg" alt="ספינג'">
      <div>
        <strong>ספינג'</strong><br>
        <span class="price">5 ₪ ליחידה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>

          <button onclick="updateCart('ספינג', 5, -1, 'images/sfenj.jpg')">➖</button>
          <span id="count-ספינג'">0</span>
          <button onclick="updateCart('ספינג\'', 5, 1, 'images/sfenj.jpg')">➕</button>       
         </div>
      </div>
    </div>

    <div class="menu-item">
      <img src="images/toy.jpg" alt="מופלטה">
      <div>
        <strong>מופלטה</strong><br>
        <span class="price">10 ₪ ליחידה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>

          <button onclick="updateCart('מופלטה', 10, -1, 'images/toy.jpg')">➖</button>
          <span id="count-מופלטה">0</span>
          <button onclick="updateCart('מופלטה', 10, 1, 'images/toy.jpg')">➕</button>
        </div>
      </div>
    </div>
  </section>

  <!-- קינוחים -->
  <section class="menu-section" id="desserts">
    <h2>הקינוחים של מרגלית🍰</h2>
    <div class="menu-item">
      <img src="images/cake.jpg" alt="עוגה">
      <div>
        <strong>עוגת שוקולד ביתית</strong><br>
        <span class="price">40 ₪ לעוגה</span><br>
        <div class="quantity-controls">
          <span class="add-to-cart-label">הוספה לסל:</span>

          <button onclick="updateCart('עוגת שוקולד ביתית', 40, -1, 'images/cake.jpg')">➖</button>
          <span id="count-עוגת שוקולד ביתית">0</span>
          <button onclick="updateCart('עוגת שוקולד ביתית', 40, 1, 'images/cake.jpg')">➕</button>
        </div>
      </div>
    </div>
  </section>



  <!-- קישור לוואטסאפ -->
  <section class="contact-links">
    <a href="https://wa.me/972505183940?text=בקשר%20לעוגיות%20של%20אמא"
       target="_blank"
       style="display: inline-block; background-color: #25D366; color: white; padding: 12px 20px; text-decoration: none; border-radius: 8px; font-size: 18px; font-weight: bold;">
      📞 צור קשר בוואטסאפ
    </a>
  </section>

  <!-- רשתות חברתיות -->
  <section class="social-icons">
    <p>עקבו אחרינו גם ברשתות החברתיות:</p>
    <div class="icon-container">
      <a href="https://www.instagram.com/margalit222/" target="_blank" class="icon instagram" aria-label="Instagram"></a>
      <a href="https://www.facebook.com/margalit.saban/" target="_blank" class="icon facebook" aria-label="Facebook"></a>
    </div>
  </section>

</main>

<footer>
  <p>© 2025 כל הזכויות שמורות - המאפים של אמא</p>
</footer>

<!-- סקריפט לניהול סל -->
<script>
  const cart = JSON.parse(localStorage.getItem("cart") || "{}");

  function updateCart(item, price, delta, image = null) {
    if (!cart[item]) cart[item] = { count: 0, price, image };
    cart[item].count = Math.max(0, cart[item].count + delta);
    if (image) cart[item].image = image;
    localStorage.setItem("cart", JSON.stringify(cart));
    document.getElementById('count-' + item)?.innerText = cart[item].count;
    renderCart();
  }


  function renderCart() {
    const ul = document.getElementById("cart-items");
    const totalSpan = document.getElementById("total");
    const link = document.getElementById("whatsappLink");
    ul.innerHTML = "";
    let total = 0;
    let message = "שלום! אני מעוניין להזמין:\n";
    let totalItems = 0;

    for (let item in cart) {
      const product = cart[item];
      if (product.count > 0) {
        const li = document.createElement("li");
        li.innerHTML = `
          <div style="display: flex; align-items: center; gap: 10px;">
            <img src="${product.image}" alt="${item}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 6px;">
            <div style="flex-grow: 1;">
              <strong>${item}</strong><br>
              <span style="font-size: 14px; color: #777;">🧺 ${product.count} יחידות בסל</span>
              <div class="quantity-controls">
                <div style="margin-bottom: 5px; font-size: 14px; color: #666;">הוספה לסל:</div>
                <button onclick="updateCart('${item}', ${product.price}, -1, '${product.image}')">➖</button>
                <span>${product.count}</span>
                <button onclick="updateCart('${item}', ${product.price}, 1, '${product.image}')">➕</button>
              </div>
              <div style="margin-top: 5px; font-size: 14px; color: #555;">
                סה"כ: ${product.count * product.price} ₪
              </div>
            </div>
          </div>
        `;
        ul.appendChild(li);
        total += product.count * product.price;
        totalItems += product.count;
        message += `- ${item} x ${product.count}\n`;
      }
    }


   
    const badge = document.getElementById("cart-count-badge");
    if (totalItems > 0) {
      badge.innerText = totalItems;
      badge.style.display = "inline-block";
    } else {
      badge.style.display = "none";
    }
  }


  function syncQuantitiesFromCart() {
    for (let item in cart) {
      const countSpan = document.getElementById("count-" + item);
      if (countSpan) {
        countSpan.innerText = cart[item].count;
      }
    }
  }

  function toggleCart() {
    document.getElementById("sideCart").classList.toggle("open");
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderCart();
    syncQuantitiesFromCart();
  });

</script>

<script>
  const cart = JSON.parse(localStorage.getItem("cart") || "{}");

  function updateCart(item, price, delta, image = null) {
    if (!cart[item]) cart[item] = { count: 0, price, image };
    cart[item].count = Math.max(0, cart[item].count + delta);
    if (image) cart[item].image = image;
    localStorage.setItem("cart", JSON.stringify(cart));
    syncQuantitiesFromCart(); // עדכון הכמויות בתפריט
    renderCart();             // עדכון הסל
  }

  function renderCart() {
    const ul = document.getElementById("cart-items");
    const totalSpan = document.getElementById("total");
    const link = document.getElementById("whatsappLink");
    ul.innerHTML = "";
    let total = 0;
    let message = "שלום! אני מעוניין להזמין:\n";
    let totalItems = 0;

    for (let item in cart) {
      const product = cart[item];
      if (product.count > 0) {
        const li = document.createElement("li");
        li.innerHTML = `
          <div style="display: flex; align-items: center; gap: 10px;">
            <img src="${product.image}" alt="${item}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 6px;">
            <div style="flex-grow: 1;">
              <strong>${item}</strong><br>
              <span style="font-size: 14px; color: #777;">🧺 ${product.count} יחידות בסל</span>
              <div class="quantity-controls">
                <div style="margin-bottom: 5px; font-size: 14px; color: #666;">הוספה לסל:</div>
                <button onclick="updateCart('${item}', ${product.price}, -1, '${product.image}')">➖</button>
                <span>${product.count}</span>
                <button onclick="updateCart('${item}', ${product.price}, 1, '${product.image}')">➕</button>
              </div>
              <div style="margin-top: 5px; font-size: 14px; color: #555;">
                סה"כ: ${product.count * product.price} ₪
              </div>
            </div>
          </div>
        `;
        ul.appendChild(li);
        total += product.count * product.price;
        totalItems += product.count;
        message += `- ${item} x ${product.count}\n`;
      }
    }

    totalSpan.innerText = total;
    link.href = "https://wa.me/972505183940?text=" + encodeURIComponent(message + "\nסה\"כ לתשלום: " + total + " ₪");

    const badge = document.getElementById("cart-count-badge");
    if (totalItems > 0) {
      badge.innerText = totalItems;
      badge.style.display = "inline-block";
    } else {
      badge.style.display = "none";
    }
  }

  function syncQuantitiesFromCart() {
    for (let item in cart) {
      const span = document.getElementById("count-" + item);
      if (span) {
        span.innerText = cart[item].count;
      }
    }
  }

  function toggleCart() {
    document.getElementById("sideCart").classList.toggle("open");
  }

  document.addEventListener("DOMContentLoaded", () => {
    syncQuantitiesFromCart();
    renderCart();
  });
</script>


<script src="cart.js" defer></script>

</body>
</html>
